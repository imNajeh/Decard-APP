require("../../common/manifest.js");
require("../../common/vendor.js");
global.webpackJsonp([13],{

/***/ 62:
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var _vue = __webpack_require__(2);var _vue2 = _interopRequireDefault(_vue);
var _index = __webpack_require__(63);var _index2 = _interopRequireDefault(_index);function _interopRequireDefault(obj) {return obj && obj.__esModule ? obj : { default: obj };}var uni = __webpack_require__(0).default;
var app = new _vue2.default(_index2.default);
app.$mount();

/***/ }),

/***/ 63:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
Object.defineProperty(__webpack_exports__, "__esModule", { value: true });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__Applications_HBuilderX_app_Contents_HBuilderX_plugins_uniapp_node_modules_babel_loader_babelrc_false_retainLines_true_presets_Applications_HBuilderX_app_Contents_HBuilderX_plugins_uniapp_node_modules_babel_preset_env_modules_commonjs_targets_browsers_1_last_2_versions_not_ie_8_Applications_HBuilderX_app_Contents_HBuilderX_plugins_uniapp_node_modules_babel_preset_stage_2_plugins_Applications_HBuilderX_app_Contents_HBuilderX_plugins_uniapp_node_modules_babel_plugin_transform_runtime_helpers_false_polyfill_false_regenerator_true_moduleName_Applications_HBuilderX_app_Contents_HBuilderX_plugins_uniapp_node_modules_babel_runtime_Applications_HBuilderX_app_Contents_HBuilderX_plugins_uniapp_node_modules_babel_plugin_transform_decorators_legacy_Applications_HBuilderX_app_Contents_HBuilderX_plugins_uniapp_lib_uni_loader_js_Applications_HBuilderX_app_Contents_HBuilderX_plugins_uniapp_lib_preprocessor_loader_js_type_js_context_APP_PLUS_true_Applications_HBuilderX_app_Contents_HBuilderX_plugins_uniapp_lib_mpvue_loader_lib_selector_type_script_index_0_index_vue__ = __webpack_require__(65);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__Applications_HBuilderX_app_Contents_HBuilderX_plugins_uniapp_node_modules_babel_loader_babelrc_false_retainLines_true_presets_Applications_HBuilderX_app_Contents_HBuilderX_plugins_uniapp_node_modules_babel_preset_env_modules_commonjs_targets_browsers_1_last_2_versions_not_ie_8_Applications_HBuilderX_app_Contents_HBuilderX_plugins_uniapp_node_modules_babel_preset_stage_2_plugins_Applications_HBuilderX_app_Contents_HBuilderX_plugins_uniapp_node_modules_babel_plugin_transform_runtime_helpers_false_polyfill_false_regenerator_true_moduleName_Applications_HBuilderX_app_Contents_HBuilderX_plugins_uniapp_node_modules_babel_runtime_Applications_HBuilderX_app_Contents_HBuilderX_plugins_uniapp_node_modules_babel_plugin_transform_decorators_legacy_Applications_HBuilderX_app_Contents_HBuilderX_plugins_uniapp_lib_uni_loader_js_Applications_HBuilderX_app_Contents_HBuilderX_plugins_uniapp_lib_preprocessor_loader_js_type_js_context_APP_PLUS_true_Applications_HBuilderX_app_Contents_HBuilderX_plugins_uniapp_lib_mpvue_loader_lib_selector_type_script_index_0_index_vue___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0__Applications_HBuilderX_app_Contents_HBuilderX_plugins_uniapp_node_modules_babel_loader_babelrc_false_retainLines_true_presets_Applications_HBuilderX_app_Contents_HBuilderX_plugins_uniapp_node_modules_babel_preset_env_modules_commonjs_targets_browsers_1_last_2_versions_not_ie_8_Applications_HBuilderX_app_Contents_HBuilderX_plugins_uniapp_node_modules_babel_preset_stage_2_plugins_Applications_HBuilderX_app_Contents_HBuilderX_plugins_uniapp_node_modules_babel_plugin_transform_runtime_helpers_false_polyfill_false_regenerator_true_moduleName_Applications_HBuilderX_app_Contents_HBuilderX_plugins_uniapp_node_modules_babel_runtime_Applications_HBuilderX_app_Contents_HBuilderX_plugins_uniapp_node_modules_babel_plugin_transform_decorators_legacy_Applications_HBuilderX_app_Contents_HBuilderX_plugins_uniapp_lib_uni_loader_js_Applications_HBuilderX_app_Contents_HBuilderX_plugins_uniapp_lib_preprocessor_loader_js_type_js_context_APP_PLUS_true_Applications_HBuilderX_app_Contents_HBuilderX_plugins_uniapp_lib_mpvue_loader_lib_selector_type_script_index_0_index_vue__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__Applications_HBuilderX_app_Contents_HBuilderX_plugins_uniapp_lib_mpvue_loader_lib_template_compiler_index_id_data_v_b89ff474_hasScoped_false_Applications_HBuilderX_app_Contents_HBuilderX_plugins_uniapp_lib_preprocessor_loader_js_type_html_context_APP_PLUS_true_Applications_HBuilderX_app_Contents_HBuilderX_plugins_uniapp_lib_mpvue_loader_lib_selector_type_template_index_0_index_vue__ = __webpack_require__(66);
function injectStyle (ssrContext) {
  __webpack_require__(64)
}
var normalizeComponent = __webpack_require__(1)
/* script */

/* template */

/* styles */
var __vue_styles__ = injectStyle
/* scopeId */
var __vue_scopeId__ = null
/* moduleIdentifier (server only) */
var __vue_module_identifier__ = null
var Component = normalizeComponent(
  __WEBPACK_IMPORTED_MODULE_0__Applications_HBuilderX_app_Contents_HBuilderX_plugins_uniapp_node_modules_babel_loader_babelrc_false_retainLines_true_presets_Applications_HBuilderX_app_Contents_HBuilderX_plugins_uniapp_node_modules_babel_preset_env_modules_commonjs_targets_browsers_1_last_2_versions_not_ie_8_Applications_HBuilderX_app_Contents_HBuilderX_plugins_uniapp_node_modules_babel_preset_stage_2_plugins_Applications_HBuilderX_app_Contents_HBuilderX_plugins_uniapp_node_modules_babel_plugin_transform_runtime_helpers_false_polyfill_false_regenerator_true_moduleName_Applications_HBuilderX_app_Contents_HBuilderX_plugins_uniapp_node_modules_babel_runtime_Applications_HBuilderX_app_Contents_HBuilderX_plugins_uniapp_node_modules_babel_plugin_transform_decorators_legacy_Applications_HBuilderX_app_Contents_HBuilderX_plugins_uniapp_lib_uni_loader_js_Applications_HBuilderX_app_Contents_HBuilderX_plugins_uniapp_lib_preprocessor_loader_js_type_js_context_APP_PLUS_true_Applications_HBuilderX_app_Contents_HBuilderX_plugins_uniapp_lib_mpvue_loader_lib_selector_type_script_index_0_index_vue___default.a,
  __WEBPACK_IMPORTED_MODULE_1__Applications_HBuilderX_app_Contents_HBuilderX_plugins_uniapp_lib_mpvue_loader_lib_template_compiler_index_id_data_v_b89ff474_hasScoped_false_Applications_HBuilderX_app_Contents_HBuilderX_plugins_uniapp_lib_preprocessor_loader_js_type_html_context_APP_PLUS_true_Applications_HBuilderX_app_Contents_HBuilderX_plugins_uniapp_lib_mpvue_loader_lib_selector_type_template_index_0_index_vue__["a" /* default */],
  __vue_styles__,
  __vue_scopeId__,
  __vue_module_identifier__
)

/* harmony default export */ __webpack_exports__["default"] = (Component.exports);


/***/ }),

/***/ 64:
/***/ (function(module, exports) {

// removed by extract-text-webpack-plugin

/***/ }),

/***/ 65:
/***/ (function(module, exports, __webpack_require__) {

"use strict";
Object.defineProperty(exports, "__esModule", { value: true });var uni = __webpack_require__(0).default;
























































var dateUtils = __webpack_require__(4).dateUtils;exports.default =
{
	data: function data() {
		return {
			banner: {},
			listData: [],
			last_id: "",
			reload: false,
			curTab: 'news',

			buyList: [],
			weibo_list: [] };

	},
	onShow: function onShow() {
		this.getExchange();
		this.getBuyList();
	},
	onLoad: function onLoad() {
		this.getBanner();
		this.getList();
	},
	onPullDownRefresh: function onPullDownRefresh() {
		this.reload = true;
		this.last_id = "";
		this.getBanner();
		this.getList();
	},
	onReachBottom: function onReachBottom() {
		this.getList();
	},
	methods: {
		getBanner: function getBanner() {var _this2 = this;
			var data = {
				column: "id,post_id,title,author_name,cover,published_at" //需要的字段名
			};
			uni.request({
				url: 'https://unidemo.dcloud.net.cn/api/banner/36kr',
				data: data,
				success: function success(data) {
					uni.stopPullDownRefresh();
					if (data.statusCode == 200) {
						_this2.banner = data.data;
					}
				},
				fail: function fail(data, code) {
					console.log('fail' + JSON.stringify(data));
				} });

		},
		getList: function getList() {var _this3 = this;
			var data = {
				column: "id,post_id,title,author_name,cover,published_at" //需要的字段名
			};
			if (this.last_id) {//说明已有数据，目前处于上拉加载
				data.minId = this.last_id;
				data.time = new Date().getTime() + "";
				data.pageSize = 10;
			}
			uni.request({
				url: 'https://unidemo.dcloud.net.cn/api/news',
				data: data,
				success: function success(data) {
					if (data.statusCode == 200) {
						var list = _this3.setTime(data.data);
						_this3.listData = _this3.reload ? list : _this3.listData.concat(list);
						_this3.last_id = list[list.length - 1].id;
						_this3.reload = false;
					}
				},
				fail: function fail(data, code) {
					console.log('fail' + JSON.stringify(data));
				} });

		},
		goDetail: function goDetail(e) {
			// 				if (!/前|刚刚/.test(e.published_at)) {
			// 					e.published_at = dateUtils.format(e.published_at);
			// 				}
			var detail = {
				author_name: e.author_name,
				cover: e.cover,
				id: e.id,
				post_id: e.post_id,
				published_at: e.published_at,
				title: e.title };

			uni.navigateTo({
				url: "./detail?detailDate=" + JSON.stringify(detail) });

		},
		setTime: function setTime(items) {
			var newItems = [];
			items.forEach(function (e) {
				newItems.push({
					author_name: e.author_name,
					cover: e.cover,
					id: e.id,
					post_id: e.post_id,
					published_at: dateUtils.format_2(e.published_at),
					title: e.title });

			});
			return newItems;
		},
		setTime_2: function setTime_2(items) {
			var newItems = [];
			items.forEach(function (e) {
				newItems.push({
					username: e.userInfo.username,
					nickname: e.userInfo.nickname,
					id: e.id,
					content: e.content,
					good: e.good,
					createdAt: dateUtils.format_2(e.createdAt),
					avatar: e.userInfo.avatar });

			});
			return newItems;
		},
		changeTab: function changeTab(e) {
			this.curTab = e;
		},
		getBuyList: function getBuyList() {var _this4 = this;
			uni.request({
				url: 'http://119.29.39.213:3000/getArticle',
				data: {
					pageNo: 1,
					pageSize: 10 },

				success: function success(data) {
					if (data.statusCode == 200) {
						// console.log(JSON.stringify(data.data))
						_this4.buyList = data.data.data.resData;
					}
				},
				fail: function fail(data, code) {
					console.log('fail' + JSON.stringify(data));
				} });

		},
		goGoods: function goGoods(id) {
			uni.getStorage({
				key: 'token',
				success: function success() {
					uni.navigateTo({
						url: './goods?id=' + id });

				},
				fail: function fail() {
					uni.navigateTo({
						url: '../me/login' });

				} });

		},
		addExchange: function addExchange() {
			uni.getStorage({
				key: 'token',
				success: function success() {
					uni.navigateTo({
						url: './add' });

				},
				fail: function fail() {
					uni.navigateTo({
						url: '../me/login' });

				} });

		},
		getExchange: function getExchange() {
			var _this = this;
			var token = uni.getStorageSync('token');
			uni.request({
				url: 'http://119.29.39.213:3000/exchangeArea',
				data: {
					pageNo: 1,
					pageSize: 20 },

				header: {
					authorization: token },

				success: function success(data) {
					if (data.statusCode == 200) {
						// console.log(JSON.stringify(data.data))
						_this.weibo_list = _this.setTime_2(data.data.data.resData);
					}
				},
				fail: function fail(data, code) {
					console.log('fail' + JSON.stringify(data));
				} });

		},
		addGood: function addGood(id, index) {
			var _this = this;
			var token = uni.getStorageSync('token');
			uni.getStorage({
				key: 'token',
				success: function success() {
					uni.showLoading({
						title: '点赞中',
						mask: true });

					uni.request({
						method: 'POST',
						url: 'http://119.29.39.213:3000/addGood',
						data: {
							exchangeId: id },

						header: {
							authorization: token },

						success: function success(data) {
							if (data.statusCode == 200) {
								// console.log(JSON.stringify(data.data))
								if (data.data.msg == '点赞成功') {
									_this.weibo_list[index].good = _this.weibo_list[index].good + 1;
									uni.hideLoading();
									uni.showToast({
										icon: 'none',
										title: '+1',
										mask: false,
										duration: 1500 });

								}
							}
						},
						fail: function fail(data, code) {
							console.log('fail' + JSON.stringify(data));
						} });

				},
				fail: function fail() {
					uni.navigateTo({
						url: '../me/login' });

				} });


		} } };

/***/ }),

/***/ 66:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;
  return _c('view', {
    staticClass: "page"
  }, [_c('view', {
    staticClass: "top_tab"
  }, [_c('view', {
    class: 'tab_item ' + (_vm.curTab == 'news' ? 'active' : ''),
    attrs: {
      "eventid": '0'
    },
    on: {
      "click": function($event) {
        _vm.changeTab('news')
      }
    }
  }, [_vm._v("资讯")]), _vm._v(" "), _c('view', {
    class: 'tab_item ' + (_vm.curTab == 'buy' ? 'active' : ''),
    attrs: {
      "eventid": '1'
    },
    on: {
      "click": function($event) {
        _vm.changeTab('buy')
      }
    }
  }, [_vm._v("专栏")]), _vm._v(" "), _c('view', {
    class: 'tab_item ' + (_vm.curTab == 'weibo' ? 'active' : ''),
    attrs: {
      "eventid": '2'
    },
    on: {
      "click": function($event) {
        _vm.changeTab('weibo')
      }
    }
  }, [_vm._v("社区")])]), _vm._v(" "), (_vm.curTab == 'news') ? _c('view', {
    staticClass: "news"
  }, [_c('view', {
    staticClass: "banner",
    attrs: {
      "eventid": '3'
    },
    on: {
      "click": function($event) {
        _vm.goDetail(_vm.banner)
      }
    }
  }, [_c('image', {
    staticClass: "banner-img",
    attrs: {
      "src": _vm.banner.cover
    }
  }), _vm._v(" "), _c('view', {
    staticClass: "banner-title"
  }, [_vm._v(_vm._s(_vm.banner.title))])]), _vm._v(" "), _c('view', {
    staticClass: "uni-list"
  }, _vm._l((_vm.listData), function(value, key) {
    return _c('view', {
      key: key,
      staticClass: "uni-list-cell",
      attrs: {
        "hover-class": "uni-list-cell-hover",
        "eventid": '4-' + key
      },
      on: {
        "click": function($event) {
          _vm.goDetail(value)
        }
      }
    }, [_c('view', {
      staticClass: "uni-media-list"
    }, [_c('image', {
      staticClass: "uni-media-list-logo",
      attrs: {
        "src": value.cover
      }
    }), _vm._v(" "), _c('view', {
      staticClass: "uni-media-list-body"
    }, [_c('view', {
      staticClass: "uni-media-list-text-top"
    }, [_vm._v(_vm._s(value.title))]), _vm._v(" "), _c('view', {
      staticClass: "uni-media-list-text-bottom"
    }, [_c('text', [_vm._v(_vm._s(value.author_name))]), _vm._v(" "), _c('text', [_vm._v(_vm._s(value.published_at))])])])])])
  }))]) : _vm._e(), _vm._v(" "), (_vm.curTab == 'buy') ? _c('view', {
    staticClass: "news"
  }, _vm._l((_vm.buyList), function(item, index) {
    return _c('view', {
      key: index,
      staticClass: "buy_item",
      attrs: {
        "eventid": '5-' + index
      },
      on: {
        "click": function($event) {
          _vm.goGoods(item.id)
        }
      }
    }, [_c('text', {
      staticClass: "title"
    }, [_vm._v(_vm._s(item.title))]), _vm._v(" "), _c('text', {
      staticClass: "summary"
    }, [_vm._v(_vm._s(item.summary))]), _vm._v(" "), _c('view', {
      staticClass: "buy_btn_wrap"
    }, [_c('text', {
      staticClass: "cost"
    }, [_vm._v(_vm._s(item.price) + " DB")]), _vm._v(" "), _c('view', {
      staticClass: "buy_btn"
    }, [_vm._v("查看详情")])])])
  })) : _vm._e(), _vm._v(" "), (_vm.curTab == 'weibo') ? _c('view', {
    staticClass: "news"
  }, [_c('view', {
    staticClass: "add_btn",
    attrs: {
      "eventid": '6'
    },
    on: {
      "click": _vm.addExchange
    }
  }, [_vm._v("+")]), _vm._v(" "), _vm._l((_vm.weibo_list), function(item, index) {
    return _c('view', {
      key: index,
      staticClass: "weibo_item"
    }, [_c('view', {
      staticClass: "weibo_top"
    }, [_c('image', {
      staticClass: "avatar",
      attrs: {
        "src": item.avatar ? item.avatar : '../../static/images/avatar.jpg',
        "mode": "scaleToFill"
      }
    }), _vm._v(" "), _c('text', {
      staticClass: "username"
    }, [_vm._v(_vm._s(item.nickname ? item.nickname : item.username))])]), _vm._v(" "), _c('view', {
      staticClass: "weibo_content"
    }, [_vm._v("\n\t\t\t\t" + _vm._s(item.content) + "\n\t\t\t")]), _vm._v(" "), _c('view', {
      staticClass: "date"
    }, [_c('text', [_vm._v(_vm._s(item.createdAt))]), _vm._v(" "), _c('text', {
      attrs: {
        "eventid": '7-' + index
      },
      on: {
        "click": function($event) {
          _vm.addGood(item.id, index)
        }
      }
    }, [_vm._v("赞(" + _vm._s(item.good) + ")")])])])
  })], 2) : _vm._e()])
}
var staticRenderFns = []
var esExports = { render: render, staticRenderFns: staticRenderFns }
/* harmony default export */ __webpack_exports__["a"] = (esExports);

/***/ })

},[62]);